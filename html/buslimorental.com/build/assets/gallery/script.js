!function(e){"use strict";function a(e){if("false"===e)return!1;var a=/(?:\?v=|\/embed\/|\.be\/)([-a-z0-9_]+)/i.exec(e)||/^([-a-z0-9_]+)$/i.exec(e);return!!a&&a[1]}function r(a){e(a.target).closest(".mbr-slider").hasClass("in")&&a.target.playVideo()}var t;if(!e("html").hasClass("is-builder")){var i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n);var l=[];window.onYouTubeIframeAPIReady=function(){var t=t||{};t.YTAPIReady||(t.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady")),e(".video-slide").each((function(t){if(e(".video-container").eq(t).append('<div id ="mbr-video-'+t+'" class="mbr-background-video" data-video-num="'+t+'"></div>').append('<div class="item-overlay"></div>'),e(this).attr("data-video-num",t),-1!==e(this).attr("data-video-url").indexOf("vimeo.com")){var i={id:e(this).attr("data-video-url"),width:"100%",height:"100%",loop:!0};(n=new Vimeo.Player("mbr-video-"+t,i)).playVideo=Vimeo.play}else var n=new YT.Player("mbr-video-"+t,{height:"100%",width:"100%",videoId:a(e(this).attr("data-video-url")),events:{onReady:r},playerVars:{rel:0}});l.push(n)}))}}function o(a){var r=e(a.target);void 0!==e.fn.masonry&&r.outerFind(".mbr-gallery").each((function(){var a=e(this).find(".mbr-gallery-row").masonry({itemSelector:".mbr-gallery-item:not(.mbr-gallery-item__hided)",percentPosition:!0,horizontalOrder:!0});a.masonry("reloadItems"),a.on("filter",function(){a.masonry("reloadItems"),a.masonry("layout"),e(window).trigger("update.parallax")}.bind(this,a)),a.imagesLoaded().progress((function(){a.masonry("layout")}))}))}function d(){clearTimeout(t),t=setTimeout(s,50)}function s(){var a=e(".mbr-gallery .modal");if(a.length){var r=e(window).width()-0,t=e(window).height()-0;a.each((function(){var a,i,n=e(this).find(".modal-dialog"),l=n.find(".carousel-item.active > img");n.find(".carousel-item.prev > img, .carousel-item.next > img").length&&(l=n.find(".carousel-item.prev > img, .carousel-item.next > img").eq(0));var o=l[0].naturalWidth,d=l[0].naturalHeight;r/t>o/d?a=(t-20)*o/d:a=r-20;i=(t-(a=a>=o?o:a)*d/o)/2,n.css({width:parseInt(a),top:i+0})}))}}e(document).on("add.cards",(function(a){var r=e(a.target);r.find(".mbr-gallery-filter-all");r.on("click",".mbr-gallery-filter li > .btn",(function(a){a.preventDefault();var t=e(this).closest("li");t.parent().find("a").removeClass("active"),e(this).addClass("active");var i=t.closest("section").find(".mbr-gallery-row"),n=e(this).html().trim();r.find(".mbr-gallery-item").each((function(a,r){var i=e(this),l=i.attr("data-tags").split(",").map((function(e){return e.trim()}));-1!==e.inArray(n,l)||t.hasClass("mbr-gallery-filter-all")?i.removeClass("mbr-gallery-item__hided"):(i.addClass("mbr-gallery-item__hided"),setTimeout((function(){i.css("left","300px")}),200))})),setTimeout((function(){i.closest(".mbr-gallery-row").trigger("filter")}),50)}))})),e(document).on("add.cards changeParameter.cards changeButtonColor.cards",(function(a){var r=e(a.target),t=r.find(".mbr-gallery-filter-all"),i=[];if(r.find(".mbr-gallery-item").each((function(a){(e(this).attr("data-tags")||"").trim().split(",").map((function(a){var r=a.trim();-1===e.inArray(r,i)&&r.trim()&&i.push(r)}))})),r.find(".mbr-gallery-filter").length>0&&e(a.target).find(".mbr-gallery-filter").hasClass("gallery-filter-active")&&!e(a.target).find(".mbr-gallery-filter").hasClass("mbr-shop-filter")){var n="",l=t.find("a").attr("class")||"";l=l.replace(/(^|\s)active(\s|$)/," ").trim(),r.find(".mbr-gallery-filter ul li:not(li:eq(0))").remove(),i.map((function(e){n+='<li><a class="'+l+'" href>'+e+"</a></li>"})),r.find(".mbr-gallery-filter ul").append(n)}else r.find(".mbr-gallery-item__hided").removeClass("mbr-gallery-item__hided"),r.find(".mbr-gallery-row").trigger("filter");o(a)})),e(document).on("change.cards",(function(e){o(e)})),e(".mbr-gallery-item").on("click","a",(function(e){e.stopPropagation()}));var m=e(document).find(".mbr-gallery");m.on("show.bs.modal",(function(a){clearTimeout(r);var r=setTimeout((function(){var r=e(a.relatedTarget).parent().index(),t=e(a.target).find(".carousel-item").eq(r).find(".mbr-background-video");if(e(a.target).find(".carousel-item .mbr-background-video"),t.length>0){var i=l[+t.attr("data-video-num")];i.playVideo?i.playVideo():i.play()}}),500);d()})),m.on("slide.bs.carousel",(function(a){var r=e(a.target).find(".carousel-item.active .mbr-background-video");if(r.length>0){var t=l[+r.attr("data-video-num")];t.pauseVideo?t.pauseVideo():t.pause()}})),e(window).on("resize load",d),m.on("slid.bs.carousel",(function(a){var r=e(a.target).find(".carousel-item.active .mbr-background-video");if(r.length>0){var t=l[+r.attr("data-video-num")];t.playVideo?t.playVideo():t.play()}d()})),m.on("hide.bs.modal",(function(e){l.map((function(e,a){e.pauseVideo?e.pauseVideo():e.pause()}))}))}(jQuery);